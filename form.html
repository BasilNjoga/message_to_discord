<!DOCTYPE html> 
<html>
    <head>
            <title>Check form </title>
    </head>
    <body>
        <div class='wrapper'>
            <form id='nameForm'>
            <div class='form-uname'>
                <label id='nameLable' for='nameField'>Create a username:</label>
                <input id='nameField' type='text' maxlength='25'></input>
            </div>
            <div class='form-sub'>
                <button id='subButton' type='button'>Print your name!</button>
            </div>
            </form>
            
            <div>
                <p id='result'></p></div>
            </div>
    </body>

    <script>
    function getUserName() {
        var nameField = document.getElementById('nameField').value;
        var result = document.getElementById('result');

        if (nameField.length > 0) {
                result.textContent = 'Your username is: ' + nameField;
                callApi(nameField)

        }
        };
    var subButton = document.getElementById('subButton');
    subButton.addEventListener('click', getUserName, false); 

    function callApi(mymessage){
    const apiUrl = 'https://www.hackercoop.dev/api/boop';
    const accessToken = 'HackerSummer2023';
    const requestData = {
    content: 'Message here: ' + mymessage
    };

    const headers = {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
    };

    fetch(apiUrl, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(requestData)
    })
    .then(response => response.json())
    .then(data => {
        // Process the returned data
        console.log(data);
    })
    .catch(error => {
        // Handle any errors that occurred during the request
        console.error('Error:', error);
    });
};
    </script>
</html> 